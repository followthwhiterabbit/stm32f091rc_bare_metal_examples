//#include "stm32f091xc.h"
#include "stm32f0xx.h"
#include "uart.h"
#include <stdint.h>
#include <stdio.h>







int main(void)
{
	uart2_tx_init();


uart_write('k');
uart_write('a');
uart_write('a');
uart_write('n');


while(1)
{
	printf("hello from stm32f091rc.....\n\r");
}


}






void uart_write(unsigned int ch)
{
	/* make sure transmit data register is empty */
	while(!(USART2->ISR & ISR_TXE))
	{

	} // we wait here until transmission is completed

	/* Write to transmit data register */

	USART2->TDR = (ch & 0xFF);




}





static void uart_set_baudrate(USART_TypeDef *USARTx, uint32_t PeriphClk, uint32_t BaudRate)
{

USARTx->BRR = compute_uart_bd(PeriphClk, BaudRate);

}




static uint16_t compute_uart_bd(uint32_t PeriphClk, uint32_t BaudRate)
{
			return ((PeriphClk + (BaudRate/2U)) /BaudRate);


}


